version: "3"
services:
  user-service:
    build: ./user-service
    ports:
      - 7002:3000
    volumes:
      - ./user-service:/app
    depends_on:
      - user-database
    environment:
      JWT_KEY: secret
  user-database:
    image: mysql:latest
    environment:
      MYSQL_DATABASE: users
      MYSQL_ROOT_PASSWORD: password
    ports:
      - 0.0.0.0:8002:3306
      
  product-service:
    build: ./product-service
    volumes:
      - ./product-service:/app
    ports:
      - 7001:3000
    depends_on:
      - product-database
    environment:
      JWT_KEY: secret
  product-database:
    image: mysql:latest
    environment:
      MYSQL_DATABASE: products
      MYSQL_ROOT_PASSWORD: password
    ports:
      - 0.0.0.0:8001:3306


  order-service:
    build: ./order-service
    volumes:
      - ./order-service:/app
    ports:
      - 7003:3000
    depends_on:
      - order-database
    environment:
      JWT_KEY: secret
  order-database:
    image: mysql:latest
    environment:
      MYSQL_DATABASE: orders
      MYSQL_ROOT_PASSWORD: password
    ports:
      - 0.0.0.0:8003:3306